- DONE #Reunión Alignment Meeting
  collapsed:: true
  :LOGBOOK:
  CLOCK: [2022-09-06 Tue 16:00:00]--[2022-09-06 Tue 17:30:00] =>  01:30:00
  :END:
  - #Web/Documentación [[Manolo Quero]] ha proporcionado un documento en el que se describe con detalle [SSPARC](https://docs.google.com/presentation/d/1fK81HX7OvGu6YDoDr6pp96g6NVgB9eA5946jOKIiwPw/edit#slide=id.g60a1ec3113_2_27)
  - [#C] Otros documentos presentados en la reunión, revisar
    - [Doc A](https://docs.google.com/presentation/d/1fK81HX7OvGu6YDoDr6pp96g6NVgB9eA5946jOKIiwPw/edit#slide=id.g60a1ec3113_2_27)
    - [Doc B](https://docs.google.com/document/d/1ni8YZ5L3ghywAQ5tfomGQUO13h7XElDWEUAJ0ySgbQw/edit)
  - [#C] Vuelve a aparecer la necesidad de crear una página web para apoyar el pitch (posible nueva reunión):
    - tiene que tener [**Google Analytics**](https://analytics.google.com/analytics/web/#/report-home/a119242697w176539699p175376432)
    - hay que tener reuniones de estructura
    - tecnología
- DONE Conversión a 24 horas
  collapsed:: true
  :LOGBOOK:
  CLOCK: [2022-09-20 Tue 11:56:22]--[2022-09-20 Tue 13:30:51] =>  01:34:29
  CLOCK: [2022-09-20 Tue 17:08:01]--[2022-09-20 Tue 19:23:47] =>  02:15:46
  CLOCK: [2022-09-21 Wed 11:48:32]--[2022-09-21 Wed 13:50:35] =>  02:02:03
  CLOCK: [2022-09-21 Wed 16:39:39]--[2022-09-21 Wed 17:12:50] =>  00:33:11
  CLOCK: [2022-09-22 Thu 10:13:29]--[2022-09-22 Thu 10:29:26] =>  00:15:57
  CLOCK: [2022-09-22 Thu 10:45:00]--[2022-09-22 Thu 11:00:00] =>  00:15:00
  CLOCK: [2022-09-23 Thu 11:15:00]--[2022-09-23 Thu 11:30:00] =>  00:15:00
  CLOCK: [2022-09-23 Thu 11:45:00]--[2022-09-23 Thu 13:30:00] =>  00:15:00
  CLOCK: [2022-09-23 Thu 17:00:00]--[2022-09-23 Thu 17:26:00] =>  00:15:00
  CLOCK: [2022-09-26 Mon 09:30:59]--[2022-09-26 Mon 10:30:01] =>  01:00:02
  CLOCK: [2022-09-26 Mon 11:42:59]--[2022-09-26 Mon 12:14:00] =>  01:00:02
  CLOCK: [2022-09-27 Tue 15:31:59]--[2022-09-27 Tue 15:36:24] =>  00:04:25
  CLOCK: [2022-09-28 Wed 09:30:16]--[2022-09-28 Wed 09:50:48] =>  00:18:32
  CLOCK: [2022-09-28 Wed 11:49:16]--[2022-09-28 Wed 12:07:48] =>  00:18:32
  CLOCK: [2022-09-28 Wed 17:17:22]--[2022-09-28 Wed 17:37:30] =>  00:20:08
  CLOCK: [2022-09-29 Thu 12:07:37]--[2022-09-29 Thu 12:10:41] =>  00:03:04
  CLOCK: [2022-10-04 Tue 14:00:00]--[2022-10-04 Tue 14:15:00] =>  00:15:00
  CLOCK: [2022-10-04 Tue 17:22:24]--[2022-10-04 Tue 18:10:08] =>  00:47:44
  CLOCK: [2022-10-06 Thu 10:03:54]--[2022-10-06 Thu 11:16:37] =>  01:12:43
  CLOCK: [2022-10-06 Thu 12:13:45]--[2022-10-06 Thu 12:40:06] =>  00:26:21
  CLOCK: [2022-10-07 Fri 09:27:34]--[2022-10-07 Fri 10:58:26] =>  01:30:52
  CLOCK: [2022-10-10 Mon 17:33:45]--[2022-10-10 Mon 18:11:25] =>  00:37:40
  :END:
  - La rama a testear es la **24_polar_dev_slope_inarow**
  - Las 24 horas afectan casi exclusivamente al 141-0, 131-1 y al 13-1
  - El InpF ha cambiado
  - Cuidado con las ramas, cerrar features actuales y abrir una feature llamada **24h**
  - Secuencia de acciones:
    - Comenzamos por el **repo Monolithic**, se han encontrado cambios en el **InpFOptPar** (cambios en el valor del parámetro **RadiusP**) que se van a propagar a  **libsunnsaasbackend**
    - Se ha intentado actualizar el **000-curated_inputs** del **InpF** y el **InpFOptPar**
    - Se ha mergeado la rama del 24h sobre una rama de prueba **Development_24h** llamada **Development_24h_merge**, y ha ido bien. Mergear sobre **Development_24h**.
    - Se ha compilado el binario y ha salido andando bien.
    - Se han creado en **algorithm-ready-sunnsaas** y en **libsunnsaasbackend** una rama **feature/24h**.
    - Hemos estado modificando el **analysistaskucdesignoptimization130.ts** para que lance 131-1 con KFDay = [1,12] y KFHour = [1,24]. Ya está produciendo los análisis en la infraestructura pero ahora tenemos que modificar los tests de **020-ucdesignoptimizationrun.test.ts** para que lance los tests 13-0 de poco en poco, el sistema se satura y casca.
    - Atención que se han desconectado contextos de prueba en **040-ucdesignoptimization/assets/runconfigs.ts**, restaurar y probar con todos.
    - Replicado lo hecho para racionalizar el lanzamiento de las 131-1 con las 13-1, va bien pero da fallos, [[Manolo Quero]] está depurando, le hemos pasado algunos FEE y tendremos que pasarle alguno más.
    - Los FEE que hemos extraído para probar funcionan correctamente. Por lo tanto, hemos modificado los tests para que lance los 131-1 uno por uno para ver cual falla. Después haremos lo mismo con los 13-1.
    - Probando con los 131-1. No están produciendo el fichero **FluxOnFlatPlane.csv**, investigando todos.
    - Ya parece estar identificado el problema. El binario bloquea el cálculo cuando encuentra que la hora proporcionada es demasiado temprana, [[Manolo Quero]] está en ello.
    - [[Manolo Quero]] lo ha resuelto, probando.
    - Nuevo problema, un error de índice fuera de array. [[Manolo Quero]] testeando.
    - No olvidarse que los tests están capados para realizar no todos 131-1 / 13-1. Buscar **// TODO D:**.
    - Material en Slack disponible.
    - Tomadas en consideración las apreciaciones de [[Manolo Quero]]. Tests cortos pasados, con los largos.
    - Todos los tests han pasado. Ahora la cosa está en ver cómo se recopilan los datos. Echarle un vistazo al proceso de recogida de datos a ver cómo va y desplegar para que ellos prueben.
    - Nuevos commits en monolithic, desplegar.
    - Trabajando la recogida de datos del D&O en analysisucdesignoptimization.ts/eventAnalysisCompleted$. Ahí hay ciertas líneas que imponían un offset a las horas de 5 ó 6 horas en la mañana que estamos desactivando. Las líneas están marcadas con comentarios **// TODO D:**.
    - Parece que la recogida de datos es correcta, los datos de 24 horas parecen que se recogen todos. Sólo los datos de RecThermalOut estaban expresados en [1,24], por lo que se le ha metido un corrector para que pasen a la escala [0,23] del resto de datos.
      - El RecThermalOut ya está en escala [0,23].
    - El nivel de datos alcanzado es un disparate en los exports, de 1GB. Se hace inmanejable. La base de datos parece que aguanta.
    - ¿Se ve el EYA afectado también por esto de las 24h?
    - Lanzar tests completos cuando se terminen los que están ahora
      - No ha ido bien, el EYA se ha quedado bloqueado
    - Lanzando tests de EYA para ver si se estancan
    - Lanzando el algoritmo fallido a huevo a ver qué pasa
      - Termina. El problema es que esta gente ha metido mogollón de cambios en el EYA. Para empezar, el output ha cambiado drásticamente y esto será para después.
      - El problema con el % de avance es que ahora el EYA da dos vueltas, por lo que el seguimiento llega al 99% y ahí se queda. La segunda vuelta que da puede darse o no, por lo que hay que tenerlo en cuenta y si no ocurre, llegar al 100% abruptamente. Los detalles están en Slack y [[Manolo Quero]] va a implementar un nuevo sistema de alerta de seguimento.
    - [[Manolo Quero]] ha corregido la propuesta de nueva información de avance, probar a huevo e implementar el nuevo progreso.
    - Después habrá que enfrentarse al nuevo output
    - Estamos ejecutando los tests y los EYA están corriendo, pero no hay información de progreso puesto que seguramente no está parseando correctamente la salida por consola. Dejar que termine y ejecutar el FEE manualmente después para estudiar la salida y adaptar el progreso.
    - Curiosamente los EYA han terminado sin dar errores, cosa extraña porque se supone que los formatos de salida han cambiado. Hay que mirar lo del formato de progreso, adaptar, y lanzar. Comprobar si funciona el progreso y lanzar los tests completos.
    - Actualizada la lógica de progreso. Lamentamente [[Manolo Quero]] no lo tiene bien implementado, lo hemos hablado y lo está haciendo conforme a especificaciones. Probando aunque el algoritmo no esté preparado. **Hay D:**, ojo. Probando que el progreso se gestiona correctamente. Volverlo a hacer cuando [[Manolo Quero]] corrija el algoritmo y lo volvamos a desplegar.
    - [[Manolo Quero]] ya tiene lo suyo, desplegándolo y testeando.
    - Ha funcionado correctamente el seguimiento del progreso, haciendo las pruebas del EYA completas.
    - Haciendo tests completos, esperar a que terminen y desplegar en stable. A la espera de que esta gente diga algo sobre si hay algo que salvar en stable.
    - Fallos menores en los tests.
    - Ejecutando tests finales, han pasado
    - Estamos desplegando en **stable**, pero hay problemas de infraestructura antigua. Continuar siguiendo el **README.md** de sunnsaas_v1 en la parte de production
    - Desplegado en **stable**, versión **3.2.10-test_24h**. Ahora esta gente tiene que probarlo. Cerramos esta tarea aquí.
- [#C] #Documentación Documentación: probar a meter el resultado de un MkDocs en SunnSaaS
- [#C] Ver días de vacaciones que quedan
- DONE Comenzar arreglando los fallos de visualización actual de SunnSaaS
  collapsed:: true
  :logbook:
  CLOCK: [2022-09-12 Mon 17:28:59]--[2022-09-12 Mon 18:55:54] =>  01:26:55
  CLOCK: [2022-09-14 Wed 10:23:51]--[2022-09-14 Wed 10:38:39] =>  00:14:48
  :END:
  - Ahora mismo tenemos console.log("D:"), quitar
  - También hay unos `<p>TEST:</p>` en los HTML, comentar
  - Al repo se le ha hecho un commit de seguridad pero hay que compararlo con su predecesor para quitar material de prueba y ver diferencias en el orden del renderizado. El commit de referencia es **b584772**, compara con éste
  - Los campos polares no pueden tener los puntos cardinales
    - ![Screenshot from 2022-08-22 11-41-09.png](../assets/Screenshot_from_2022-08-22_11-41-09_1662996915712_0.png)
    - Es sencillo, simplemente le quitamos al componente bidimensionalmosaic la definición de las labels del eje X.
    - Los componentes clave son:
      - **solar-flux-discrete.component.ts:** el dataset del mosaico. Este componente debe detectar el tipo de receptor para dar al eje X los puntos cardinales o no gracias al servicio **GetReceiverTypeService**, que está en la carpeta general de servicios;
      - **d3-bidimensionalmosaic.component.html:** el componente D3. A este no hay que hacerle nada, ya que si le llegan las labels del eje X a undefined simplemente no los dibuja;
  - Algunos campos polares no tienen visualización
    - ![Screenshot from 2022-08-22 11-41-48.png](../assets/Screenshot_from_2022-08-22_11-41-48_1662996979157_0.png)
    - Se debe a que están utilizando tipos de receptores no soportados, como por ejemplo en este análisis:
      - http://localhost:4200/app/operations/resource/1K2ZozxFt/ReceiverSpecifications/input
      - http://localhost:4200/app/operations/resource/1K2ZozxFt/FluxOnFlatPlane/output/FluxOnFlatPlane
    - Ahora mismo están soportados los receptores tipo 0 y 1, pero este análisis usa un 3
    - **solar-flux-on-receiver.component.html:** este es el componente de visualización del Dataset, no muestra el viz porque no entiende qué hacer para tipo de receptor 3.
  - **Solución:** todos los receptores salvo el 0 son polares.
- [#C] #Documentación [[Manolo Quero]] le va a preguntar a [[Michiel Erkelens]] cómo proceder con la documentación. Las opciones dependen de la privacidad de la misma
  collapsed:: true
  - crear una estructura tentativa de cómo debería ser la documentación
  - un sistema abierto en página web: abierto para todo el mundo, puede ser una ventaja, pero no se puede filtrar información sensible
  - Posibles soluciones de implementación:
    - probar a meter el resultado de un MkDocs en SunnSaaS
    - un PDF para dárselo a los posibles clientes
